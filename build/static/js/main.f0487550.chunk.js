(this.webpackJsonpthe=this.webpackJsonpthe||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),u=n.n(c),o=n(4),i=n(2),l=n(3),m=n.n(l),s=function(){return m.a.get("api/persons").then((function(e){return e.data}))},f=function(e){return m.a.post("api/persons",e).then((function(e){return e.data}))},d=function(e,t){return m.a.put("".concat("api/persons","/").concat(e),t).then((function(e){return e.data}))},b=(n(37),function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)}),h=function(e){var t=Object(a.useState)([{name:"Arto Hellas",id:1,number:"0874833394"}]),n=Object(i.a)(t,2),c=n[0],u=n[1],l=Object(a.useState)(""),h=Object(i.a)(l,2),p=h[0],v=h[1],E=Object(a.useState)(""),j=Object(i.a)(E,2),O=j[0],g=j[1],w=Object(a.useState)(""),S=Object(i.a)(w,2),y=S[0],C=S[1],k=Object(a.useState)(!0),A=Object(i.a)(k,2),T=A[0],J=A[1],L=Object(a.useState)("some error..."),N=Object(i.a)(L,2),x=N[0],B=N[1];Object(a.useEffect)((function(){s().then((function(e){u(e)}))}),[]);var D=T?c:c.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})),H=function(e){window.confirm("Are you sure you want to delete ".concat(e.name))&&m.a.delete("".concat("http://www.localhost:3001/persons","/").concat(e.id)).then((function(){u(c.filter((function(t){return t.id!==e.id})))})).catch((function(t){B(" ".concat(e.name," has already been removed from the server")),setTimeout((function(){B(null)}),5e3),u(c.filter((function(t){return t.id!==e.id})))}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:x}),"Search: ",r.a.createElement("input",{value:y,onChange:function(e){C(e.target.value)}}),r.a.createElement("button",{onClick:function(){return J(!T)}}," "),r.a.createElement("h3",null," Add a new "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:p,id:c.length+1,number:O},n=c.find((function(e){return e.name===p}));if(console.log(n),void 0===n)f(t).then((function(e){u(c.concat(e)),v(""),g(""),B("Added ".concat(e.name)),setTimeout((function(){B(null)}),5e3)}));else{var a=Object(o.a)(Object(o.a)({},n),{},{number:O});d(n.id,a).then((function(e){console.log(e),u(c.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){B(" ".concat(e.name," has already been removed from the server")),setTimeout((function(){B(null)}),5e3),v(""),g(""),u(c.filter((function(e){return e.id!==n.id})))}))}}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:p,onChange:function(e){v(e.target.value)}})),r.a.createElement("div",null," phone number: ",r.a.createElement("input",{value:O,onChange:function(e){g(e.target.value)}}),"   "),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,D.map((function(e){return r.a.createElement("li",{key:e.id}," ",e.name," ",e.number," ",r.a.createElement("button",{onClick:H.bind(void 0,e)}," delete ")," ")}))))};u.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f0487550.chunk.js.map